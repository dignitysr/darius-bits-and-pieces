[gd_scene load_steps=19 format=3 uid="uid://cqhan3bhxm6h6"]

[ext_resource type="Script" uid="uid://dsh2si3vgye6m" path="res://scenes/player/classes/character.gd" id="1_gmlin"]
[ext_resource type="Texture2D" uid="uid://bd1dfblwwkpdr" path="res://scenes/player/assets/jump_sheet.png" id="2_5gtgg"]
[ext_resource type="Texture2D" uid="uid://dsrtnvbpgyuwa" path="res://scenes/player/assets/walk_sheet.png" id="2_lvxji"]
[ext_resource type="Script" uid="uid://dxostdknl0om5" path="res://scenes/player/classes/animator.gd" id="3_p47bc"]
[ext_resource type="Script" uid="uid://dqo7g8nnhmo30" path="res://scenes/player/states/ground.gd" id="4_lvxji"]
[ext_resource type="Script" uid="uid://cp02xg1rj5qa7" path="res://scenes/player/states/air.gd" id="5_75vfm"]
[ext_resource type="Script" uid="uid://yag527r55u83" path="res://scenes/player/classes/rotationmanager.gd" id="5_p47bc"]
[ext_resource type="Script" uid="uid://cf38apg2cgbbb" path="res://scenes/player/states/jump.gd" id="5_qek5x"]
[ext_resource type="Script" uid="uid://cgvo2naoyxku4" path="res://scenes/player/states/none.gd" id="6_0owmy"]

[sub_resource type="AtlasTexture" id="AtlasTexture_je7p5"]
atlas = ExtResource("2_5gtgg")
region = Rect2(14, 0, 13, 17)

[sub_resource type="AtlasTexture" id="AtlasTexture_75vfm"]
atlas = ExtResource("2_lvxji")
region = Rect2(0, 0, 13, 17)

[sub_resource type="AtlasTexture" id="AtlasTexture_fm80t"]
atlas = ExtResource("2_5gtgg")
region = Rect2(0, 0, 13, 17)

[sub_resource type="AtlasTexture" id="AtlasTexture_0owmy"]
atlas = ExtResource("2_lvxji")
region = Rect2(0, 0, 13, 17)

[sub_resource type="AtlasTexture" id="AtlasTexture_qek5x"]
atlas = ExtResource("2_lvxji")
region = Rect2(13, 0, 13, 17)

[sub_resource type="AtlasTexture" id="AtlasTexture_5gtgg"]
atlas = ExtResource("2_lvxji")
region = Rect2(26, 0, 13, 17)

[sub_resource type="AtlasTexture" id="AtlasTexture_h17s1"]
atlas = ExtResource("2_lvxji")
region = Rect2(39, 0, 13, 17)

[sub_resource type="SpriteFrames" id="SpriteFrames_je7p5"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_je7p5")
}],
"loop": true,
"name": &"fall",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_75vfm")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fm80t")
}],
"loop": true,
"name": &"jump",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0owmy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qek5x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5gtgg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h17s1")
}],
"loop": true,
"name": &"walk",
"speed": 10.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fm80t"]
size = Vector2(9, 15.5)

[node name="Player" type="CharacterBody2D"]
script = ExtResource("1_gmlin")

[node name="Sprite" type="AnimatedSprite2D" parent="."]
position = Vector2(0.9999981, -9.536743e-07)
sprite_frames = SubResource("SpriteFrames_je7p5")
animation = &"fall"
script = ExtResource("3_p47bc")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0.5, 0.75)
shape = SubResource("RectangleShape2D_fm80t")

[node name="PhysicsStates" type="Node" parent="."]

[node name="Ground" type="Node" parent="PhysicsStates" node_paths=PackedStringArray("air_state", "rotation_manager")]
script = ExtResource("4_lvxji")
move_speed = 2.0
air_state = NodePath("../Air")
rotation_manager = NodePath("../../RotationManager")
animation = "idle"

[node name="Jump" type="Node" parent="PhysicsStates/Ground" node_paths=PackedStringArray("air_state")]
script = ExtResource("5_qek5x")
air_state = NodePath("../../Air")
jump_power = 1.0

[node name="Air" type="Node" parent="PhysicsStates" node_paths=PackedStringArray("ground_state")]
script = ExtResource("5_75vfm")
move_speed = 2.0
ground_state = NodePath("../Ground")
accel_div = 25.0
accel_damp = 50.0
accel_add = 1.0
friction_div = 6.0
unrotate_speed = 2.0
animation = "jump"

[node name="None" type="Node" parent="PhysicsStates"]
script = ExtResource("6_0owmy")

[node name="RotationManager" type="Node" parent="." node_paths=PackedStringArray("character", "raycast")]
script = ExtResource("5_p47bc")
character = NodePath("..")
raycast = NodePath("../RayCast2D")

[node name="RayCast2D" type="RayCast2D" parent="."]
target_position = Vector2(0, 15)
